timeouts:
  job:
    minutes: 50
  connection:
    minutes: 5
  action:
    minutes: 4
context:
  test_character_delay: 10
  lava_test_results_dir: "/home/fio/lava-%s"
device_type: {{ device_type }}
job_name: aklite interrupt tests - {{ target }}
priority: 50
visibility: public
metadata:
  build-url: '{{ build_url }}'
  build-id: '{{ build_id }}'
  trigger: '{{ trigger }}'
actions:
{% include "deploy.inc.yaml" %}
{% include "deploy2.inc.yaml" %}
- command:
    name: network_turn_on
- boot:
{% include "boot.inc.yaml" %}

- command:
    name: network_throttle_down
- test:
    timeout:
      minutes: 15
    definitions:
    - repository: http://github.com/linaro/test-definitions.git
      from: git
      path: automated/linux/aklite-download-interrupt/aklite-download-interrupt.yaml
      name: aklite-download-interrupt
- command:
    name: network_turn_off
- test:
    timeout:
      minutes: 25
    definitions:
    - repository: http://github.com/linaro/test-definitions.git
      from: git
      path: automated/linux/aklite-download-interrupt/aklite-download-resume.yaml
      name: aklite-download-resume
- command:
    name: network_turn_on
- command:
    name: network_throttle_up
- test:
    timeout:
      minutes: 15
    definitions:
    - repository: http://github.com/linaro/test-definitions.git
      from: git
      path: automated/linux/aklite-download-interrupt/aklite-download-confirm.yaml
      name: aklite-download-confirm
